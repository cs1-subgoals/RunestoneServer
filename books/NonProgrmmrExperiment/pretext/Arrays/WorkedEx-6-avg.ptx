<section xml:id="arrays_worked-example-arrays-average" xmlns:xi="http://www.w3.org/2001/XInclude" xml:lang="en-US">
    <title>Worked Example: Arrays - Average</title>
    <xi:include href='./subgoals-arrays.ptx' />
    <subsection>
        <p>You can watch this video or read through the content below it.</p>
        <video xml:id="video-arrays-we6" youtube="RLfLOcKHH-8"/>
        <p>Problem: Assume that the integer array <c>alpha</c> has been properly declared and is full of data values. Evaluate these statements and determine the value of <c>avg</c>. If any error occurs, give the reason.</p>
        <program language="java">
            <input>
int sum = 0;
double avg = 0.0;
for (int i = 0; i &lt; alpha.length; i++)
sum = sum + alpha[i];
if (alpha.length != 0)
avg = (sum * 1.0) &#160;/ alpha.length;
            </input>
        </program>
    </subsection>
    <subsection>
        <title>SG1: Set up array from 0 to size-1</title>
        <figure align="">
            <image source="Arrays/Figures/we4-init.png" alt="Instantiated Array"/>
        </figure>
        <p>
            <ul>
                <li>
                    <p>alpha is an array of ints and has values, but we don&#8217;t know what those values are</p>
                </li>
                <li>
                    <p>however, we can still diagram a representation of this array</p>
                </li>
                <li>
                    <p>notice that the largest index is size - 1</p>
                </li>
            </ul>
        </p>
    </subsection>
    <subsection>
        <title>SG2: Evaluate data type of statements against array</title>
        <p>References to the array are in the loop and selection statements:</p>
        <program language="java">
            <input>
for (int i = 0; i &lt; alpha.length; i++)
   sum = sum + alpha[i];
if (alpha.length != 0)
   avg = (sum * 1.0) / alpha.length;
            </input>
        </program>
        <p>
            <ul>
                <li>
                    <p>This loop has index i go from 0 to size - 1 (&lt;length) by increments of 1.</p>
                </li>
                <li>
                    <p>Then the value at alpha[i] is added to sum, an int.</p>
                </li>
                <li>
                    <p>If the size of the array is not 0, then it is divided by the number of values in alpha.</p>
                </li>
                <li>
                    <p>All indexes into the array are valid, and all assignments are valid.</p>
                </li>
            </ul>
        </p>
    </subsection>
    <subsection>
        <title>SG3: Trace statements, updating slots as you go</title>
        <p>Let us trace with a sample array.</p>
        <figure align="">
            <image source="Arrays/Figures/we4-sample.png" alt="Sample Array"/>
        </figure>
        <p>First, <c>sum</c> and <c>avg</c> are both initialized to zero values, and then a for-loop is used to traverse the array to calculate the sum. The chart below uses one line to represent the memory and calculations during each iteration of the loop, starting when i has a value of zero.</p>
        <figure align="">
            <image source="Arrays/Figures/we6-trace.png" alt="Trace calculation of sum"/>
        </figure>
        <p>Next we look at the selection statement:</p>
        <program language="java">
            <input>
if (alpha.length != 0)
   avg = (sum * 1.0) / alpha.length;
            </input>
        </program>
        <p>In our sample, <c>alpha.length</c> is 5, and 60 divided by 5 is 12, for a final value of 12 in <c>avg</c>.
        </p>
        <p>Why have the selection statement? What if the array has been declared, but has no values? Then its size is 0 &#8211; and we would be dividing by 0! An exception!  So we guard against this by checking the length.</p>
        <p>Why do we need to multiply sum by 1.0? Remember, an int divided by an int is always an int! Our sample did not have any remainder or decimal value, but that might not always be the case. So we need to make sure that either the divisor or dividend is a double; and one way to do this without affecting the value is to multiply it by 1.0.  Another way would be to add 0.0 to the value. Still another way would be to <term>cast</term> the value as a double.</p>
        <p>The more general answer to the original question is: &#8220;<c>avg</c> contains the average of the values in the array <c>alpha</c> or 0 if <c>alpha</c> is empty.&#8221;</p>
    </subsection>
    <subsection>
        <title>Practice Pages</title>
        <p><ul marker="disc">
            <li>
                <xref text="title" ref="arrays_arrays-we6-p1" />
            </li>
        </ul></p>
    </subsection>
</section>

